

# 项目基本信息

教师信息管理系统             

**为了便于学生选择合适的导师，也为了宣传教师的信息，希望构造教师信息** 

**管理系统，将教师的信息统一管理，便于教师及时更新发布信息，便于学生** 

**浏览教师信息，并可以预约教师。** 

– 提供教师基本信息，可同工大主页、百度知道等结合 

– 提供教师日程 

– 提供教师基金和科研成果， 

– 教师检索 

– 教师推荐 

– 提供教师预约功能 

– 附注：可同教师的在线日历等关联



要求：项目采用前后端分离架构，后端为django，前端为vue（采用element ui 实现），数据库为mysql

​		前端路由（Vue SPA）和后端 REST API 路由（Django DRF）

# 项目角色及其用户故事清单

### 学生角色

**卡片ID**：S-01
**标题**：按关键词与条件搜索导师
**正面：用户故事**：作为学生，我希望在系统中通过姓名、学科关键词、学院或研究方向等多维度条件进行搜索与筛选，以便快速定位合适的导师。
**反面：成功与失败场景**：

- **成功**：输入关键词后，系统实时返回多条符合条件的教师列表，学生能点击进入详情页。
- **失败**：输入无效关键词或网络异常时，系统提示“未找到结果”或“网络错误，请重试”。
  **优先级**：高
  **备注**：需与后端检索 API 联调。

**卡片ID**：S-02
**标题**：浏览导师详情与科研成果
**正面：用户故事**：作为学生，我希望在导师详情页查看其个人简介、教学与科研背景、基金项目和论文成果，以便评估导师的学术水平和研究方向。
**反面：成功与失败场景**：

- **成功**：详情页模块加载完整，科研成果按年份排序，点击外链可正常跳转。
- **失败**：若成果数据缺失或接口超时，系统展示“暂无数据”提示，并允许刷新重试。
  **优先级**：中
  **备注**：与教师端数据展示保持一致风格。

**卡片ID**：S-03
**标题**：查看并同步导师日程
**正面：用户故事**：作为学生，我希望能在老师详情页查看其公开的日程和可预约时间，并同步到我的个人日历，以便合理安排面谈时间。
**反面：成功与失败场景**：

- **成功**：点击“一键同步”后，日程正确导入用户日历，并在提醒中心显示同步记录。
- **失败**：若第三方日历接口授权失败或导出文件损坏，系统提示“同步失败，请检查授权或重试”。
  **优先级**：高
  **备注**：需评估日历 API 限制与数据安全。

**卡片ID**：S-04
**标题**：在线预约与通知
**正面：用户故事**：作为学生，我希望提交预约申请后，能收到系统确认消息和日程变更通知，以便及时调整计划。
**反面：成功与失败场景**：

- **成功**：预约提交后，系统发送“预约成功”通知；若教师接受或拒绝，分别发送确认或改期通知。
- **失败**：若教师未响应或网络异常，系统定时提醒用户并允许重新提交。
  **优先级**：高
  **备注**：需与消息中心与邮件服务集成。

卡片ID**：S-05**

标题**：**学生获得教师推荐

- **用户角色** ：学生
- **功能需求** ：能够根据自己的专业、兴趣等因素，获得系统推荐的教师。
- **验收条件** ：学生登录系统后，在首页的 “推荐教师” 区域，系统根据学生所学专业和之前浏览的教师信息等，推荐 3 - 5 位合适的教师，推荐结果符合逻辑且有一定针对性。

------

### 教师角色

**卡片ID**：T-01
**标题**：维护个人主页与科研展示
**正面：用户故事**：作为教师，我希望自由编辑个人主页内容，包括头像、简介、研究方向、项目和成果展示，以便学生了解我的专业背景。
**反面：成功与失败场景**：

- **成功**：编辑后页面即时预览，发布后学生端可立即查看最新信息。
- **失败**：若富文本内容格式错误或保存失败，系统展示详细错误并保留编辑内容。
  **优先级**：高
  **备注**：需实现富文本编辑器与版本控制功能。

**卡片ID**：T-02
**标题**：设置日程与第三方日历同步
**正面：用户故事**：作为教师，我希望设置可预约的办公时间，并将日程与 Google Calendar、Outlook 等第三方日历同步，以减少重复维护。
**反面：成功与失败场景**：

- **成功**：OAuth 授权完成后，办公时间自动推送至第三方日历；后续调整也即时同步。
- **失败**：授权超时或 API 限制，系统提示“同步暂不可用”，并保留本地配置。
  **优先级**：高
  **备注**：需评估 OAuth 安全与频率限制。

**卡片ID**：T-03
**标题**：审批与管理预约请求
**正面：用户故事**：作为教师，我希望在系统内查看学生的预约请求详情，并能够接受、拒绝或提出改期建议，以便高效安排。
**反面：成功与失败场景**：

- **成功**：审批操作后，系统实时更新请求状态并发送通知；列表准确反映当前状态。
- **失败**：若操作超时或通知发送失败，系统提示“操作失败，请重试”并保留原有请求状态。
  **优先级**：中
  **备注**：与通知中心、日志管理关联。

------

### 管理员角色

**卡片ID**：A-01
**标题**：管理平台用户与权限
**正面：用户故事**：作为管理员，我希望能够创建、编辑与删除学生和教师账号，并分配相应角色和权限，以保证系统安全与数据准确。
**反面：成功与失败场景**：

- **成功**：用户操作后系统日志记录完整，账号变动即时生效；相应人员收到通知。
- **失败**：若批量导入文件格式错误或超出权限范围，系统提示具体错误并回滚操作。
  **优先级**：高
  **备注**：需与权限框架（RBAC）集成。

**卡片ID**：A-02
**标题**：定时同步外部数据源
**正面：用户故事**：作为管理员，我希望配置并执行与工大主页、百度知道等外部平台的教师信息定时同步，以保持数据最新。
**反面：成功与失败场景**：

- **成功**：同步任务定时执行，新增/更新数据准确导入；日志显示成功明细。
- **失败**：若接口限流或数据冲突，系统在日志中记录失败项，并生成报表供人工审核。
  **优先级**：中
  **备注**：需考虑 API 限流与数据清洗。

**卡片ID**：A-03
**标题**：推荐算法与统计报表
**正面：用户故事**：作为管理员，我希望能调整导师推荐算法参数，并查看系统使用统计（搜索热度、预约量、活跃用户），以优化系统效果。
**反面：成功与失败场景**：

- **成功**：参数调整后推荐结果及时更新，并能在测试环境对比效果；统计报表准确展示数据。
- **失败**：若算法执行异常或统计接口超时，系统提示“操作失败”，并可回滚至上一个稳定版本。
  **优先级**：低
  **备注**：初期可使用默认参数，后续迭代。

------

### 产品待办列表（Backlog）

以下为基于用户故事卡片整理的产品待办列表（Backlog），已按优先级从高到低排序，数字越大优先级越高。上游故事编号对应本表中的“用户故事编号”。

| 用户故事编号 | 用户故事简称             | 用户故事描述                                                 | 优先级估算 | 上游故事编号 |
| ------------ | ------------------------ | ------------------------------------------------------------ | ---------- | ------------ |
| 1            | 学生搜索导师             | 作为学生，我希望在系统中通过姓名、学科关键词、学院或研究方向等多维度条件进行搜索与筛选，以便快速定位合适的导师。 | 5          | –            |
| 2            | 查看并同步导师日程       | 作为学生，我希望能在导师详情页查看其公开的日程和可预约时间，并同步到我的个人日历，以便合理安排面谈时间。 | 5          | 1            |
| 3            | 在线预约与通知           | 作为学生，我希望提交预约申请后，能收到系统确认消息和日程变更通知，以便及时调整计划。 | 5          | 2            |
| 4            | 维护个人主页与科研展示   | 作为教师，我希望自由编辑个人主页内容，包括头像、简介、研究方向、项目和成果展示，以便学生了解我的专业背景。 | 5          | –            |
| 5            | 设置日程与第三方日历同步 | 作为教师，我希望设置可预约的办公时间，并将日程与 Google Calendar、Outlook 等第三方日历同步，以减少重复维护。 | 5          | 4            |
| 6            | 管理平台用户与权限       | 作为管理员，我希望能够创建、编辑与删除学生和教师账号，并分配相应角色和权限，以保证系统安全与数据准确。 | 5          | –            |
| 7            | 浏览导师详情与科研成果   | 作为学生，我希望在导师详情页查看其个人简介、教学与科研背景、基金项目和论文成果，以便评估导师的学术水平和研究方向。 | 3          | 1            |
| 8            | 学生查询推荐教师         | 作为学生，我希望能够根据自己的专业、兴趣等因素，获得系统推荐的教师。 | 3          | 1            |
| 9            | 审批与管理预约请求       | 作为教师，我希望在系统内查看学生的预约请求详情，并能够接受、拒绝或提出改期建议，以便高效安排。 | 3          | 5            |
| 10           | 外部数据源定时同步       | 作为管理员，我希望配置并执行与工大主页、百度知道等外部平台的教师信息定时同步，以保持数据最新。 | 3          | –            |
| 11           | 推荐算法与统计报表       | 作为管理员，我希望能调整导师推荐算法参数，并查看系统使用统计（搜索热度、预约量、活跃用户），以优化系统效果。 | 1          | –            |



# sqlite数据库

### 配置settings.py：

改根目录**backend\backend**下的**settings.py**：

```python
# settings.py
DATABASES = {
    'default': {
	# 使用 sqlite
	'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',

	# 使用MySQL
        # 'ENGINE': 'django.db.backends.mysql',
        # 'NAME': 'teacher_info_system',
        # 'USER': 'admin',     # 新创建的用户
        # 'PASSWORD': '456666', # 您设置的密码
        # 'HOST': 'localhost',
        # 'PORT': '3306',
        # 'OPTIONS': {
        #     'charset': 'utf8mb4',
        #     'init_command': "SET sql_mode='STRICT_TRANS_TABLES'",
        # }
    }
}
```

数据库code：

```python
# Create your models here.
from django.db import models
from django.contrib.auth.models import AbstractUser

# 自定义用户模型
class User(AbstractUser):
    ROLE_CHOICES = (
        ('student', 'Student'),
        ('teacher', 'Teacher'),
        ('admin', 'Admin'),
    )
    role = models.CharField(max_length=10, choices=ROLE_CHOICES)
    
    # 重写 groups 和 user_permissions 字段，使用不同的 related_name
    groups = models.ManyToManyField(
        'auth.Group',
        verbose_name='groups',
        blank=True,
        help_text='The groups this user belongs to.',
        related_name='custom_user_set',
        related_query_name='custom_user'
    )
    user_permissions = models.ManyToManyField(
        'auth.Permission',
        verbose_name='user permissions',
        blank=True,
        help_text='Specific permissions for this user.',
        related_name='custom_user_set',
        related_query_name='custom_user'
    )

# 教师信息表
class Teacher(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    name = models.CharField(max_length=50)
    department = models.CharField(max_length=100)
    title = models.CharField(max_length=50)
    research_areas = models.TextField()
    homepage_url = models.URLField(blank=True, null=True)
    avatar_url = models.URLField(blank=True, null=True)
    bio = models.TextField(blank=True, null=True)

# 教师日程表
class Schedule(models.Model):
    teacher = models.ForeignKey(Teacher, on_delete=models.CASCADE)
    start_time = models.DateTimeField()
    end_time = models.DateTimeField()
    is_available = models.BooleanField(default=True)
    external_source = models.CharField(max_length=50, blank=True, null=True)
    external_id = models.CharField(max_length=100, blank=True, null=True)
    synced_at = models.DateTimeField(blank=True, null=True)

# 科研成果
class ResearchAchievement(models.Model):
    teacher = models.ForeignKey(Teacher, on_delete=models.CASCADE)
    title = models.CharField(max_length=200)
    type = models.CharField(max_length=50)  # 论文、项目、基金等
    date = models.DateField()
    description = models.TextField(blank=True, null=True)
    file_url = models.URLField(blank=True, null=True)

# 预约记录
class Appointment(models.Model):
    student = models.ForeignKey(User, on_delete=models.CASCADE, limit_choices_to={'role': 'student'})
    teacher = models.ForeignKey(Teacher, on_delete=models.CASCADE)
    time_slot = models.DateTimeField()
    status = models.CharField(max_length=20, choices=[
        ('pending', 'Pending'),
        ('accepted', 'Accepted'),
        ('rejected', 'Rejected')
    ], default='pending')
    remarks = models.TextField(blank=True, null=True)

# 通知
class Notification(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    type = models.CharField(max_length=20)  # system, appointment, etc.
    content = models.TextField()
    is_read = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True)
```



## 更新数据库表

```python
# 创建迁移文件
python manage.py makemigrations

# 应用迁移，创建 SQLite 数据库
python manage.py migrate
```







# 数据库表

### User表（学生，教师，管理员均在里面）

| 字段名           | 字段类型                         | 用途                   |
| ---------------- | -------------------------------- | ---------------------- |
| role             | CharField(max_length=10)         | 存储用户角色           |
| groups           | ManyToManyField(auth.Group)      | 存储用户所属的组信息   |
| user_permissions | ManyToManyField(auth.Permission) | 存储用户特定的权限信息 |

### Teacher表

| 字段名         | 字段类型                         | 用途                     |
| -------------- | -------------------------------- | ------------------------ |
| user           | OneToOneField(User)              | 与User模型建立一对一关系 |
| name           | CharField(max_length=50)         | 存储教师姓名             |
| department     | CharField(max_length=100)        | 存储教师所在系部         |
| title          | CharField(max_length=50)         | 存储教师职称             |
| research_areas | TextField()                      | 存储教师研究领域         |
| homepage_url   | URLField(blank=True, null=True)  | 存储教师主页URL          |
| avatar_url     | URLField(blank=True, null=True)  | 存储教师头像URL          |
| bio            | TextField(blank=True, null=True) | 存储教师简介             |

### Schedule （日程表）

| 字段名          | 字段类型                                         | 用途                          |
| --------------- | ------------------------------------------------ | ----------------------------- |
| teacher         | ForeignKey(Teacher)                              | 多对一关系，连接到Teacher模型 |
| start_time      | DateTimeField()                                  | 存储日程开始时间              |
| end_time        | DateTimeField()                                  | 存储日程结束时间              |
| is_available    | BooleanField(default=True)                       | 表示时间段是否可用            |
| external_source | CharField(max_length=50, blank=True, null=True)  | 存储外部日程来源              |
| external_id     | CharField(max_length=100, blank=True, null=True) | 存储外部日程ID                |
| synced_at       | DateTimeField(blank=True, null=True)             | 存储日程同步时间              |

### ResearchAchievement（科研成果表）

| 字段名      | 字段类型                         | 用途                          |
| ----------- | -------------------------------- | ----------------------------- |
| teacher     | ForeignKey(Teacher)              | 多对一关系，连接到Teacher模型 |
| title       | CharField(max_length=200)        | 存储科研成果标题              |
| type        | CharField(max_length=50)         | 存储科研成果类型              |
| date        | DateField()                      | 存储科研成果日期              |
| description | TextField(blank=True, null=True) | 存储科研成果描述              |
| file_url    | URLField(blank=True, null=True)  | 存储科研成果文件URL           |

### Appointment（预约表）

| 字段名    | 字段类型                         | 用途                          |
| --------- | -------------------------------- | ----------------------------- |
| student   | ForeignKey(User)                 | 多对一关系，连接到User模型    |
| teacher   | ForeignKey(Teacher)              | 多对一关系，连接到Teacher模型 |
| time_slot | DateTimeField()                  | 存储预约时间段                |
| status    | CharField(max_length=20)         | 存储预约状态                  |
| remarks   | TextField(blank=True, null=True) | 存储预约备注                  |

### Notification（通知表）

| 字段名     | 字段类型                         | 用途                       |
| ---------- | -------------------------------- | -------------------------- |
| user       | ForeignKey(User)                 | 多对一关系，连接到User模型 |
| type       | CharField(max_length=20)         | 存储通知类型               |
| content    | TextField()                      | 存储通知内容               |
| is_read    | BooleanField(default=False)      | 表示通知是否已读           |
| created_at | DateTimeField(auto_now_add=True) | 自动记录通知创建时间       |

------



# 前端路由

## 一、前端路由（Vue + Vue-Router）

| 路由路径                          | 组件              | 说明                                         |
| --------------------------------- | ----------------- | -------------------------------------------- |
| `/`                               | HomeView          | 系统首页，搜索教师，展示推荐教师、最新通知等 |
| `/login`                          | LoginView         | 登录页面                                     |
| `/register`                       | RegisterView      | 注册页面（学生/教师）                        |
|                                   |                   |                                              |
| 学生                              |                   |                                              |
| `student/teachers`                | TeacherListView   | 导师列表页面，可多维度检索                   |
| `/teachers/:id`                   | TeacherDetailView | 导师详情页，包含基本信息、日程、成果等       |
| student/teachers/:id/appointments | appointmentview   | 预约导师                                     |
|                                   |                   |                                              |
| student`/recommendations`         | RecommendView     | 根据用户偏好/历史行为的导师推荐              |
| student`/myappointments`          | MyAppointments    | 学生：我的预约列表                           |
|                                   |                   |                                              |
| 教师功能                          |                   |                                              |
| teacher/:person                   | person            | 教师个人中心，可以修改自己信息               |
| teacher/:appointments             | personappointment | 教师查看预约                                 |
|                                   |                   |                                              |
| 管理员                            |                   |                                              |
| `/admin`                          | UserManageView    | 管理学生/教师账号                            |
| `/admin/sync`                     | DataSyncView      | 配置外部数据源定时同步（先留着）             |
|                                   |                   |                                              |





------

# 接口API

下面以[ **RESTful** 风格](https://blog.csdn.net/zzvar/article/details/118164133)，结合前后端路由设计，给出详细的接口文档。所有接口均以 `http://<域名>/api/` 为前缀，并使用 **JSON** 格式请求与响应。

统一要求：

- 所有修改类 (POST/PUT/PATCH/DELETE) 接口都需在请求头中带 `Authorization: Bearer <token>`（除登录、注册外）。
- 时间字段一律采用 ISO 8601，如 `"2025-06-01T10:00:00Z"`。
- 错误返回统一 `{ "code": <int>, "message": <string>, "details": <object?> }`。

------

## 1. 认证与用户

| 方法 | 路径                  | 描述              | 请求体                                | 响应体                                          |
| ---- | --------------------- | ----------------- | ------------------------------------- | ----------------------------------------------- |
| POST | `/api/auth/register/` | 注册（学生/教师） | `{ username, password, email, role }` | `{ id, username, email, role, created_at }`     |
| POST | `/api/auth/login/`    | 登录              | `{ username, password }`              | `{ token, user: { id, username, email, role }}` |
| POST | `/api/auth/logout/`   | 注销              | —                                     | `{ message: "Logged out" }`                     |
| GET  | `/api/auth/user/`     | 当前用户信息      | —                                     | `{ id, username, email, role, created_at }`     |

------

## 2. 用户管理（仅管理员）

| 方法   | 路径                      | 描述              | 请求体              | 响应体                                        |
| ------ | ------------------------- | ----------------- | ------------------- | --------------------------------------------- |
| GET    | `/api/admin/users/`       | 列出所有用户      | —                   | `[{ id, username, email, role, created_at }]` |
| PUT    | `/api/admin/users/{uid}/` | 更新用户角色/信息 | `{ email?, role? }` | 更新后的用户对象                              |
| DELETE | `/api/admin/users/{uid}/` | 删除用户          | —                   | `{ message: "Deleted" }`                      |

------

## 3. 教师档案

### 3.1 列表与检索

| 方法 | 路径             | 描述     | 参数                                        | 响应体                                                       |
| ---- | ---------------- | -------- | ------------------------------------------- | ------------------------------------------------------------ |
| GET  | `/api/teachers/` | 教师列表 | `?name=&department=&research_areas=&title=` | `[{ id, user_id, name, department, title, research_areas, homepage_url, avatar_url, bio }]` |

### 3.2 详情、创建、更新、删除

| 方法      | 路径                   | 描述     | 请求体                                                       | 响应体                   |
| --------- | ---------------------- | -------- | ------------------------------------------------------------ | ------------------------ |
| GET       | `/api/teachers/{tid}/` | 教师详情 | —                                                            | 单个教师对象             |
| POST      | `/api/teachers/`       | 新增教师 | `{ user_id, name, department, title?, research_areas?, homepage_url?, avatar_url?, bio? }` | 新建的教师对象           |
| PUT/PATCH | `/api/teachers/{tid}/` | 更新教师 | 可选字段同 POST                                              | 更新后的教师对象         |
| DELETE    | `/api/teachers/{tid}/` | 删除教师 | —                                                            | `{ message: "Deleted" }` |

------

## 4. 日程管理

| 方法      | 路径                                  | 描述         | 请求体                                                | 响应体                                                       |
| --------- | ------------------------------------- | ------------ | ----------------------------------------------------- | ------------------------------------------------------------ |
| GET       | `/api/teachers/{tid}/schedule/`       | 导师所有日程 | —                                                     | `[{ id, teacher_id, start_time, end_time, is_available, external_source, external_id, synced_at }]` |
| POST      | `/api/teachers/{tid}/schedule/`       | 新建时段     | `{ start_time, end_time, is_available? (默认 true) }` | 新建的时段对象                                               |
| PUT/PATCH | `/api/teachers/{tid}/schedule/{sid}/` | 更新时段     | `{ start_time?, end_time?, is_available? }`           | 更新后的时段对象                                             |
| DELETE    | `/api/teachers/{tid}/schedule/{sid}/` | 删除时段     | —                                                     | `{ message: "Deleted" }`                                     |

------

## 5. 科研成果管理

| 方法      | 路径                                  | 描述         | 请求体                                                       | 响应体                                                       |
| --------- | ------------------------------------- | ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GET       | `/api/teachers/{tid}/research/`       | 导师成果列表 | —                                                            | `[{ id, teacher_id, title, type, date, description, file_url }]` |
| POST      | `/api/teachers/{tid}/research/`       | 新增成果     | `{ title, type, date (YYYY-MM-DD), description?, file_url? }` | 新建的成果对象                                               |
| PUT/PATCH | `/api/teachers/{tid}/research/{rid}/` | 更新成果     | 可选字段同 POST                                              | 更新后的成果对象                                             |
| DELETE    | `/api/teachers/{tid}/research/{rid}/` | 删除成果     | —                                                            | `{ message: "Deleted" }`                                     |

------

## 6. 全局搜索

| 方法 | 路径                    | 描述           | 参数                              | 响应体       |
| ---- | ----------------------- | -------------- | --------------------------------- | ------------ |
| GET  | `/api/search/teachers/` | 多维度搜索导师 | `?q=&department=&research_areas=` | 教师对象数组 |

------

## 7. 推荐系统

| 方法 | 路径                    | 描述     | 参数                       | 响应体                        |
| ---- | ----------------------- | -------- | -------------------------- | ----------------------------- |
| GET  | `/api/recommendations/` | 推荐导师 | 可选 `?student_id=&limit=` | `[{ teacher: {...}, score }]` |

------

## 8. 预约管理

| 方法      | 路径                       | 描述               | 请求体                                | 响应体                                                       |
| --------- | -------------------------- | ------------------ | ------------------------------------- | ------------------------------------------------------------ |
| GET       | `/api/appointments/`       | 我的预约列表       | —                                     | `[{ id, student_id, teacher_id, time_slot, status, remarks }]` |
| POST      | `/api/appointments/`       | 新建预约           | `{ teacher_id, time_slot, remarks? }` | 新建的预约对象                                               |
| GET       | `/api/appointments/{aid}/` | 预约详情           | —                                     | 单个预约对象                                                 |
| PUT/PATCH | `/api/appointments/{aid}/` | 教师审核（改状态） | `{ status: 'accepted'                 | 'rejected', remarks? }`                                      |
| DELETE    | `/api/appointments/{aid}/` | 取消预约           | —                                     | `{ message: "Deleted" }`                                     |

------

## 9. 推荐参数与统计（管理员）

| 方法 | 路径                                      | 描述             | 请求体       | 响应体                                                       |
| ---- | ----------------------------------------- | ---------------- | ------------ | ------------------------------------------------------------ |
| GET  | `/api/admin/stats/`                       | 查看系统统计     | —            | `{ total_users, total_teachers, total_apps, search_count, ... }` |
| GET  | `/api/admin/recommendation/params/`       | 查看推荐算法参数 | —            | `[{ id, factor, weight }]`                                   |
| PUT  | `/api/admin/recommendation/params/{pid}/` | 更新参数         | `{ weight }` | 更新后的参数对象                                             |

------

## 10. 外部数据同步（管理员）

| 方法 | 路径                               | 描述         | 请求体                | 响应体                                      |
| ---- | ---------------------------------- | ------------ | --------------------- | ------------------------------------------- |
| POST | `/api/admin/sync/externalsources/` | 触发同步     | `{ source: 'gongda'   | 'baidu' }`                                  |
| GET  | `/api/admin/sync/logs/`            | 同步日志列表 | 可分页 `?page=&size=` | `[{ id, source, status, details, run_at }]` |

------

## 11. 通知

| 方法 | 路径                             | 描述         | 请求体 | 响应体                                         |
| ---- | -------------------------------- | ------------ | ------ | ---------------------------------------------- |
| GET  | `/api/notifications/`            | 我的通知列表 | —      | `[{ id, type, content, is_read, created_at }]` |
| PUT  | `/api/notifications/{nid}/read/` | 标记为已读   | —      | `{ message: "Marked read" }`                   |

------







# 前端界面设计



请先学习该项目，然后根据项目文档README.md（其中数据库和url不能变）完成【】功能，要满足文档内要求，同时请告诉我前后端间如何连通（含API的请求体和响应体），且给出测试步骤，前后端均在当前目录下



## 一、首页设计

- **页面布局** ：
  - **顶部导航栏** ：左侧是系统的 logo 和名称 “教师信息管理系统”，右侧设置 “首页”“教师列表”“我的预约”（学生登录后显示）/“预约管理”（教师登录后显示）“个人中心” 等导航链接，方便用户在不同页面间快速切换。
  - **搜索区域** ：在导航栏下方，设置一个宽大的搜索框，占满页面宽度的 60% 左右，搜索框左侧有 “搜索教师” 的提示文字，右侧有下拉菜单，可供选择按 “姓名”“专业”“职称” 等条件进行搜索，搜索框右侧有搜索按钮，按钮上以图标和文字结合的方式显示 “搜索”。
  - **推荐教师区域** ：在搜索区域下方，以横向滚动的卡片形式展示推荐教师，每张卡片展示教师的姓名、专业、推荐理由（如 “该教师在 [领域] 有丰富的教学和科研经验”）等信息，卡片上方有教师的照片，照片圆形展示，吸引用户注意。卡片宽度适中，保证在页面上能同时展示 3 - 4 张卡片，卡片之间有适当的间距，整体排列整齐美观。在区域的左上角用醒目的文字标注 “推荐教师”，右上角设置 “更多” 链接，点击后跳转到推荐教师页面，展示更多的教师信息。
  - **教师列表区域** ：在推荐教师区域下方，以网格布局的形式展示教师列表，每行展示 4 位教师的信息，每位教师以一张卡片形式呈现，卡片宽度一致，高度适中，保证展示的信息完整且不显得拥挤。卡片上展示教师的姓名、性别、专业、职称、联系方式等基本信息，教师的照片以较小的圆形展示在卡片的左上角。卡片整体采用简洁的设计风格，背景色为浅色，边框圆润，鼠标悬停时有轻微的阴影效果，增加交互感。在教师列表区域的左上角设置 “教师列表” 标题，右上角设置筛选条件，如 “按专业筛选”“按职称筛选” 等下拉菜单，方便用户快速筛选教师。
- **功能说明** ：
  - 用户登录系统后，根据用户角色（学生或教师）显示不同的导航链接和功能区域。学生登录后显示 “我的预约” 链接，教师登录后显示 “预约管理” 链接。
  - 搜索功能支持模糊搜索，当用户输入教师姓名的部分拼音或专业名称的关键词时，系统能准确返回符合条件的教师列表。搜索结果按照匹配度从高到低进行排序，保证用户能快速找到目标教师。
  - 推荐教师的展示是根据学生的专业和浏览历史等进行动态推荐的。系统会定期根据学生的操作行为更新推荐结果，以提供更精准的教师推荐服务。学生可以点击 “更多” 链接查看完整的教师列表，教师列表页面的布局与首页的教师列表区域类似，但在该页面可以进行更详细的筛选和排序操作。
  - 教师列表区域的筛选条件可以根据用户的选择进行组合筛选，如先选择专业再选择职称，快速定位到特定的教师群体。教师卡片上的信息清晰简洁，方便学生快速浏览和了解教师的基本情况，点击教师卡片可进入教师详情页面查看更多详细信息。

## 二、教师详情页面设计

- **页面布局** ：
  - **顶部信息栏** ：展示教师的姓名、性别、专业、职称等基本信息，教师的照片以较大的尺寸展示在左侧，照片圆形展示，右侧依次排列教师的基本信息，信息采用大号字体展示，保证在页面上突出显示教师的关键信息。在信息栏的右侧设置 “关注” 按钮（学生登录后显示）和 “编辑” 按钮（教师登录后显示），“关注” 按钮方便学生关注感兴趣的教师，后续能在个人中心查看关注的教师动态；“编辑” 按钮供教师快速进入个人信息编辑页面。
  - **标签导航区域** ：在顶部信息栏下方，设置标签导航，包括 “基本信息”“日程安排”“科研成果”“预约” 四个标签，标签采用简洁的文本形式，下方有下划线标识当前选中的标签。标签之间的间距适中，保证用户能清晰地区分不同的标签内容。初始状态下，默认选中 “基本信息” 标签。
  - **内容展示区域** ：
    - **基本信息标签页** ：以表格形式展示教师的详细基本信息，包括出生日期、联系方式、个人简介、教育背景、工作经历等。表格的表头采用深色背景，文字为白色，突出显示信息类别；表格的内容区域背景为白色，文字为黑色，保证信息的可读性。个人简介、教育背景、工作经历等较长文本信息以可折叠的形式展示，初始状态下展示部分内容，用户可点击 “展开” 按钮查看完整内容，再次点击则折叠回去，方便用户快速浏览和展开查看详细信息。
    - **日程安排标签页** ：以日历形式展示教师一周内的详细日程安排，日历的标题栏显示当前周的起止日期，日历主体部分分为七列，分别对应周一至周日。每一天的时间段从早上 8 点到晚上 8 点，以 1 小时为间隔进行划分，每个时间段内以不同颜色和文字标注展示教师的日程安排，如 “上课”“会议”“空闲” 等。上课时间用蓝色标注，会议时间用绿色标注，空闲时间用灰色标注，方便学生直观地了解教师的日程状态。学生可点击具体的日程安排查看详细信息，如上课的课程名称、会议的主题等。在日历的右侧设置 “刷新” 按钮，教师更新日程后，学生可点击刷新按钮获取最新的日程信息。
    - **科研成果标签页** ：分为 “基金项目” 和 “科研成果” 两个子标签，子标签采用类似的标签导航形式，初始状态下选中 “基金项目” 子标签。在 “基金项目” 子标签页，以列表形式展示教师的基金项目，列表项包括项目名称、时间、项目简介等信息，项目名称采用加粗字体显示，时间显示在项目名称下方，项目简介以简短的文字概括项目的主要内容，用户可点击查看详细简介。在 “科研成果” 子标签页，以列表形式展示教师的科研成果，包括论文、著作等，列表项显示成果名称、发表时间、成果简介等信息，成果名称加粗显示，发表时间位于名称下方，成果简介简要概括成果的核心内容和意义，用户点击可查看详细的成果信息，如论文的摘要、关键词，著作的目录等。
    - **预约标签页** ：在页面上方以日历形式展示教师的可预约时间段，日历的标题栏显示当前月的名称，日历主体部分以网格形式展示一个月的日期，每个日期方块内以不同颜色标注是否可预约，绿色表示可预约，红色表示不可预约（如教师有其他安排或已被预约满）。在日历的右侧设置预约信息填写区域，当用户点击可预约的日期方块后，该区域激活，显示可预约的时间段选择（如上午、下午、晚上），以及咨询事项的输入框。咨询事项输入框采用多行文本框形式，方便学生详细描述预约咨询的内容。在填写区域的底部设置 “提交预约” 按钮，按钮采用醒目的颜色（如蓝色），文字为白色，保证用户能快速找到并点击提交预约。提交成功后，页面会弹出提示框显示 “预约成功”，并在 “我的预约” 页面（学生登录后）或 “预约管理” 页面（教师登录后）更新预约信息。
- **功能说明** ：
  - 教师详情页面是学生和教师了解教师详细信息的核心页面，通过标签导航的方式，将不同类别的信息进行分类展示，方便用户快速找到所需内容。
  - “关注” 按钮方便学生对感兴趣的教师进行标记，后续在个人中心的 “关注” 页面能查看关注教师的最新动态，如日程变更、科研成果更新等。
  - 日程安排标签页以直观的日历形式展示教师的每周日程，帮助学生合理安排预约时间，避免与教师的其他安排冲突。教师可随时在个人中心的 “日程管理” 页面更新日程安排，学生在该页面能及时获取到最新的日程信息。
  - 科研成果标签页详细展示了教师的科研成就，为学生选择导师提供重要的参考依据。通过子标签的划分，学生能清晰地区分基金项目和科研成果，方便快速浏览和深入了解教师的科研情况。
  - 预约标签页的预约流程简洁明了，学生通过点击日历选择可预约的日期和时间段，填写咨询事项后即可完成预约。系统在学生提交预约后，自动向教师发送预约通知，提醒教师查看和确认预约。

## 三、学生预约页面设计

- **页面布局** ：
  - **顶部标题栏** ：简单展示 “预约教师” 的页面标题，标题采用大号字体，居中显示，背景色为浅蓝色，给用户一种清新的感觉。
  - **教师信息展示区域** ：以卡片形式展示教师的基本信息，包括照片、姓名、专业、职称等，照片圆形展示在卡片左侧，右侧依次排列教师的基本信息，信息采用简洁的排版方式，保证用户能快速识别教师身份。
  - **预约信息填写区域** ：
    - **预约日期选择** ：采用日历控件展示可预约的日期范围，当前日期及以后的日期可选，已过去的日期和教师不可预约的日期（如教师已满额预约或其他特殊安排）显示为灰色不可选状态。日历控件上方有月份导航按钮，用户可点击切换月份查看不同月份的可预约日期。在日历的右侧设置本周可预约日期的快速选择按钮，以文字形式列出周一至周日的日期，方便用户快速点击选择本周的预约日期。
    - **预约时间段选择** ：根据教师的日程安排，在选择预约日期后，下方展示可预约的时间段选项，以按钮形式展示，如 “上午（8:00 - 12:00）”“下午（14:00 - 18:00）”“晚上（19:00 - 21:00）”，可预约的时间段按钮背景为蓝色，文字为白色；不可预约的时间段按钮背景为灰色，文字为浅灰色。用户点击选择一个时间段后，按钮状态变为选中状态，背景色加深，直观地显示已选择的时间段。
    - **咨询事项填写** ：采用多行文本框形式，供学生详细描述预约咨询的内容，文本框上方有 “咨询事项” 字样的提示标签，文本框内有 “请简要描述您的咨询事项” 的占位提示文字，引导用户填写内容。文本框的高度适中，保证用户能输入足够长的咨询事项描述，同时页面布局不显得过于冗长。
    - **提交预约按钮** ：在预约信息填写区域的底部设置 “提交预约” 按钮，按钮采用醒目的绿色，文字为白色，按钮宽度适中，放置在页面中央，方便用户点击提交预约。按钮在鼠标悬停时有轻微的放大效果，增加交互感。
- **功能说明** ：
  - 学生预约页面是一个独立的页面，用于学生填写和提交预约信息。该页面在学生点击教师详情页面的 “预约” 按钮后打开，页面上自动加载教师的基本信息，避免学生重复输入教师信息，提高预约效率。
  - 预约日期选择采用日历控件，方便学生直观地查看可预约的日期范围，快速选择合适的预约日期。同时，提供本周可预约日期的快速选择功能，满足学生急需预约的需求。
  - 预约时间段选择根据教师的日程安排动态生成，确保学生选择的时间段是教师可预约的，避免预约冲突。时间段选项以按钮形式展示，用户点击即可快速选择，操作简单便捷。
  - 咨询事项填写区域为学生提供了足够的空间详细描述预约的咨询内容，帮助教师提前了解学生的咨询需求，提高预约咨询的效率和质量。
  - 提交预约按钮设计醒目且易于点击，用户完成预约信息填写后，点击提交按钮即可完成预约操作。系统在提交后会自动跳转到预约成功提示页面，并在 “我的预约” 页面更新预约信息，同时向教师发送预约通知。

## 四、教师个人中心页面设计

- **页面布局** ：
  - **左侧导航栏** ：宽度适中，采用深色背景，文字为白色，设置 “个人信息”“日程管理”“科研成果管理”“预约管理” 等导航链接，链接图标采用简洁的线条图标，与文字结合直观地展示各功能模块的含义。当前选中的导航链接背景色加深，与未选中的链接形成明显对比，帮助用户快速识别当前所在的页面。左侧导航栏采用固定布局，当页面滚动时始终保持在页面左侧，方便用户随时切换不同的功能模块。
  - **右侧内容区域** ：
    - **个人信息页面** ：以表单形式展示教师的个人信息，包括姓名、性别、专业、职称、联系方式、个人简介、教育背景、工作经历等。每个信息项左侧为表单项名称标签，右侧为相应的输入框或文本域，输入框和文本域的宽度一致，保证页面布局整齐美观。表单项之间有适当的间距，避免页面显得拥挤。在页面底部设置 “保存” 按钮，按钮采用蓝色背景，白色文字，宽度适中，放置在页面中央，方便用户在修改完信息后点击保存。按钮在鼠标悬停时有轻微的阴影效果，增加交互感。
    - **日程管理页面** ：上方以日历形式展示教师当前的月日程安排，日历标题栏显示当前月的名称，日历主体部分以网格形式展示日期，每个日期方块内以不同颜色标注日程安排状态，蓝色表示有上课安排，绿色表示有会议安排，灰色表示空闲。在日历的右侧设置 “添加日程” 按钮，按钮采用绿色背景，白色文字，点击后弹出添加日程的表单。表单包含日程类型选择（上课、会议、空闲等）、日期时间选择、地点填写、备注添加等字段，字段采用表单控件，方便教师填写和选择。在页面的下方以列表形式展示已添加的详细日程安排，列表项包括日程类型、日期时间、地点、备注等信息，每条日程记录右侧设置 “编辑” 和 “删除” 按钮，按钮采用图标形式，方便教师快速进行日程的编辑和删除操作。
    - **科研成果管理页面** ：分为 “基金项目” 和 “科研成果” 两个子标签，子标签采用标签导航形式，初始状态下选中 “基金项目” 子标签。在 “基金项目” 子标签页，以列表形式展示已添加的基金项目，列表项包括项目名称、时间、项目简介等信息，项目名称采用加粗字体显示。在列表上方设置 “添加基金项目” 按钮，按钮采用蓝色背景，白色文字，点击后弹出添加基金项目的表单，表单包含项目名称、时间、项目简介等字段。在 “科研成果” 子标签页，以列表形式展示已添加的科研成果，包括论文、著作等，列表项显示成果名称、发表时间、成果简介等信息，成果名称加粗显示。列表上方设置 “添加科研成果” 按钮，点击弹出添加表单，表单包含成果名称、发表时间、成果简介等字段。对于已添加的基金项目和科研成果，每条记录右侧设置 “编辑” 和 “删除” 按钮，方便教师进行修改和删除操作。
    - **预约管理页面** ：以列表形式展示学生的预约请求，列表项包括预约时间、学生姓名、咨询事项、预约状态等信息。列表项采用简洁的表格形式，表头背景为深色，文字为白色，突出显示信息类别；表格内容区域背景为白色，文字为黑色，保证信息的可读性。在列表项的右侧设置操作按钮，包括 “确认” 和 “取消” 按钮，“确认” 按钮采用绿色背景，白色文字，“取消” 按钮采用红色背景，白色文字，按钮文字简洁明了，方便教师快速进行操作。在页面的上方设置筛选条件，如按预约时间、学生姓名等进行筛选，方便教师快速查找特定的预约请求。在页面的右上角设置 “导出预约信息” 按钮，教师可将预约信息导出为 Excel 等格式，方便进行数据统计和分析。
- **功能说明** ：
  - 教师个人中心页面是教师管理和维护个人信息、日程安排、科研成果以及处理学生预约的核心页面。左侧导航栏提供了清晰的功能模块划分，方便教师快速切换到所需的功能页面。
  - 个人信息页面以表单形式展示教师的详细信息，教师可方便地修改和更新个人信息，确保学生获取到的是准确的教师资料。保存按钮设计醒目，方便教师在修改后及时保存信息。
  - 日程管理页面的日历视图帮助教师直观地了解自己一个月的日程安排，方便进行整体规划和调整。添加日程按钮和编辑、删除功能使教师能灵活地维护日程信息，确保学生能获取到最新的日程安排，合理安排预约。
  - 科研成果管理页面通过子标签划分基金项目和科研成果，使教师能分类管理自己的科研成就。添加、编辑和删除功能方便教师及时更新科研成果信息，展示自己的学术实力和研究方向。
  - 预约管理页面以列表形式清晰地展示学生的预约请求，教师可快速查看预约详情，并进行确认或取消操作。筛选功能和导出功能进一步提高了教师管理预约的效率和便捷性。